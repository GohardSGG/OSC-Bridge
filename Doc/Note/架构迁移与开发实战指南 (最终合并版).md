# OSC-Bridge æ¶æ„è¿ç§»ä¸å¼€å‘å®æˆ˜æŒ‡å— (æœ€ç»ˆåˆå¹¶ç‰ˆ)

**ç‰ˆæœ¬**: 3.0 (Final)
**ç”Ÿæˆæ—¥æœŸ**: 2025-12-03
**æ¶æ„çŠ¶æ€**: Tauri v2 + Svelte 4 + Tailwind CSS + TypeScript

è¿™ä»½æ–‡æ¡£æ˜¯åŸºäºé¡¹ç›®ä»åŸç”Ÿ JS/DOM æ“ä½œè¿ç§»è‡³ç°ä»£å‰ç«¯æ¡†æ¶çš„å®Œæ•´å®æˆ˜å¤ç›˜ã€‚å®ƒæ•´åˆäº†æ¶æ„å†³ç­–ã€ä»£ç é‡æ„è·¯å¾„ã€ç¯å¢ƒé…ç½®é™·é˜±ä»¥åŠæœ€ç»ˆçš„éªŒæ”¶æ ‡å‡†ã€‚

**è¿™ä»½æŒ‡å—åº”å½“ä½œä¸ºåç»­å¼€å‘è€…çš„æ ¸å¿ƒå‚è€ƒæ‰‹å†Œã€‚**

-----

## ç›®å½•

1.  **æ¶æ„æ¼”è¿›ä¸å†³ç­–ä¾æ®**
2.  **å·¥ç¨‹ç»“æ„ä¸ç¯å¢ƒé…ç½®**
3.  **å‰ç«¯è¿ç§»å®æˆ˜ï¼šä» DOM åˆ° Svelte**
4.  **æ•°æ®æ¡¥æ¢ (The Bridge) ä¸çŠ¶æ€ç®¡ç†**
5.  **æ·±å‘è­¦ç¤ºå½• (Troubleshooting Bible)**
6.  **é…ç½®æŒä¹…åŒ–ä¸è·¨å¹³å°ç­–ç•¥**
7.  **æ„å»ºã€CI/CD ä¸ç‰ˆæœ¬ç®¡ç†**
8.  **æœ€ç»ˆéªŒæ”¶æ¸…å• (Checklist)**
9.  **é™„å½•ï¼šæ ¸å¿ƒé…ç½®æ–‡ä»¶å‚è€ƒ**

-----

## 1. æ¶æ„æ¼”è¿›ä¸å†³ç­–ä¾æ®

### 1.1 ä¸ºä»€ä¹ˆè¦è¿ç§»ï¼Ÿ
åŸæœ‰çš„ `main.ts` å•æ–‡ä»¶æ¶æ„æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œé¢æ¡ä»£ç â€ç¤ºä¾‹ã€‚æ‰€æœ‰çš„ WebSocket é€šä¿¡ã€DOM æŸ¥æ‰¾ã€HTML æ‹¼æ¥å’Œä¸šåŠ¡é€»è¾‘éƒ½è€¦åˆåœ¨ä¸€èµ·ã€‚
*   **ç—›ç‚¹**: éš¾ä»¥ç»´æŠ¤ï¼ŒUI ä¿®æ”¹ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œç¼ºä¹ç»„ä»¶åŒ–ï¼Œæ ·å¼éš¾ä»¥ç®¡ç†ã€‚

### 1.2 ä¸ºä»€ä¹ˆé€‰æ‹© Svelte + Tailwindï¼Ÿ
æˆ‘ä»¬åœ¨é€‰å‹é˜¶æ®µå¯¹æ¯”äº† React, Vue, Svelte å’Œ Blazorï¼š
*   **æ’é™¤ Blazor**: è™½ç„¶æ˜¯ C# ç”Ÿæ€ï¼Œä½†åœ¨ Tauri ä¸­ä½¿ç”¨ Blazor WASM ä¼šå¯¼è‡´â€œåŒåç«¯â€é—®é¢˜ï¼ˆC# è¿è¡Œæ—¶ + Rust åç«¯ï¼‰ï¼Œé€šä¿¡æˆæœ¬é«˜ï¼Œä¸”ä¸¢å¤±äº† Tauri åŸç”Ÿ JS API çš„ä¼˜åŠ¿ã€‚
*   **æ’é™¤ React**: å¯¹äºè¿™ç§è½»é‡çº§å·¥å…·åº”ç”¨ï¼ŒReact çš„ Virtual DOM å’Œ Hooks å¿ƒæ™ºè´Ÿæ‹…ç›¸å¯¹è¾ƒé‡ã€‚
*   **é€‰æ‹© Svelte**: 
    *   **ç¼–è¯‘å‹æ¡†æ¶**: æœ€ç»ˆäº§ç‰©æ˜¯åŸç”Ÿ JSï¼Œæ€§èƒ½æé«˜ï¼Œå¯åŠ¨å¿«ã€‚
    *   **å“åº”å¼è¯­æ³•**: `let count = 0` åŠå…¶ç›´è§‚ï¼Œéå¸¸é€‚åˆä»åŸç”Ÿ JS è¿ç§»ã€‚
    *   **Store ç³»ç»Ÿ**: å†…ç½®çš„çŠ¶æ€ç®¡ç†å®Œç¾å¥‘åˆ OSC æ—¥å¿—æµçš„å¤„ç†ã€‚

### 1.3 æ ¸å¿ƒæ€ç»´è½¬å˜
*   **æ—§æ¨¡å¼ (Imperative)**: 
    *   æ”¶åˆ° WebSocket æ¶ˆæ¯ -> `document.getElementById('logs')` -> `div.innerHTML += ...`
*   **æ–°æ¨¡å¼ (Declarative)**: 
    *   æ”¶åˆ° WebSocket æ¶ˆæ¯ -> `logsStore.update(l => [...l, newLog])` -> Svelte è‡ªåŠ¨æ›´æ–° UIã€‚

-----

## 2. å·¥ç¨‹ç»“æ„ä¸ç¯å¢ƒé…ç½®

ä¸ºäº†ä¿æŒæ¸…æ™°ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†**æºç åˆ†ç¦»**çš„ç­–ç•¥ã€‚

### 2.1 ç›®å½•ç»“æ„
```text
OSC-Bridge/
â”œâ”€â”€ Build/                  # [Output] å‰ç«¯æ„å»ºäº§ç‰© (vite build è¾“å‡º)
â”œâ”€â”€ Source/                 # [Source] æ‰€æœ‰çš„æºä»£ç 
â”‚   â”œâ”€â”€ Svelte/             # [Frontend] å‰ç«¯å·¥ç¨‹æ ¹ç›®å½•
â”‚   â”‚   â”œâ”€â”€ lib/            # Svelte æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ components/ # UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/     # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ icons/      # SVG å›¾æ ‡ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ bridge.ts   # åç«¯é€šä¿¡é˜²è…å±‚
â”‚   â”‚   â”œâ”€â”€ main.ts         # Svelte å…¥å£
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ Tauri/              # [Backend] Rust å·¥ç¨‹æ ¹ç›®å½•
â”‚       â”œâ”€â”€ tauri.conf.json # Tauri æ ¸å¿ƒé…ç½®
â”‚       â””â”€â”€ ...
â”œâ”€â”€ package.json            # Node ä¾èµ–ç®¡ç†
â”œâ”€â”€ vite.config.ts          # æ„å»ºé…ç½®
â”œâ”€â”€ tailwind.config.cjs     # æ ·å¼é…ç½® (æ³¨æ„ .cjs åç¼€)
â””â”€â”€ postcss.config.cjs      # PostCSS é…ç½® (æ³¨æ„ .cjs åç¼€)
```

### 2.2 ä¾èµ–ç‰ˆæœ¬åœ°ç‹± (Dependency Hell)
è¿™æ˜¯è¿ç§»è¿‡ç¨‹ä¸­æœ€å®¹æ˜“å¡ä½çš„ç¬¬ä¸€å…³ã€‚ä¸è¦ç›²ç›®è¿½æ±‚ `latest`ï¼ŒViteã€Svelte å’Œ Tailwind ä¹‹é—´å­˜åœ¨å¤æ‚çš„æ’ä»¶ä¾èµ–å…³ç³»ã€‚

**æ¨èç¨³å®šç»„åˆ**:
*   `vite`: ^5.x (Vite 6 å¯èƒ½ä¼šå¯¼è‡´éƒ¨åˆ†æ—§æ’ä»¶å¤±æ•ˆ)
*   `svelte`: ^4.x (Svelte 5 æ”¹åŠ¨å·¨å¤§ï¼Œæš‚ä¸æ¨èç”¨äºæ—§é¡¹ç›®å¿«é€Ÿè¿ç§»)
*   `@sveltejs/vite-plugin-svelte`: ^3.x
*   `tailwindcss`: ^3.4.x (v4 ç›®å‰å¤„äº Alphaï¼Œå‘å¤šæ…ç”¨)

### 2.3 è·¯å¾„åˆ«åé…ç½® (Path Aliases)
ä¸ºäº†é¿å… `../../../` è¿™æ ·çš„å¼•ç”¨ï¼Œæˆ‘ä»¬åœ¨ `vite.config.ts` å’Œ `tsconfig.json` ä¸­é…ç½®äº† `$lib` åˆ«åã€‚
*   **Vite**: `resolve: { alias: { '$lib': path.resolve(__dirname, 'Source/Svelte/lib') } }`
*   **TS**: `"paths": { "$lib/*": ["Source/Svelte/lib/*"] }`

-----

## 3. å‰ç«¯è¿ç§»å®æˆ˜ï¼šä» DOM åˆ° Svelte

### 3.1 æ ·å¼é‡æ„ (Tailwind CSS)
**å…³é”®å‘ç‚¹**: ç”±äºé¡¹ç›®æ ¹ç›®å½•ç»“æ„å˜åŒ–ï¼ŒTailwind é»˜è®¤é…ç½®æ‰¾ä¸åˆ°æ–‡ä»¶ã€‚
**è§£å†³æ–¹æ¡ˆ**: åœ¨ `tailwind.config.cjs` ä¸­ç²¾ç¡®æŒ‡å®š `content` è·¯å¾„ï¼š
```javascript
module.exports = {
  content: ["./index.html", "./Source/Svelte/**/*.{svelte,js,ts}"],
  // ...
}
```
*å¦‚æœè·¯å¾„é…ç½®é”™è¯¯ï¼ŒTailwind å°†ä¸ä¼šç”Ÿæˆä»»ä½• CSSï¼Œå¯¼è‡´åº”ç”¨å¯åŠ¨åæ ·å¼å…¨æ— ï¼ˆé€æ˜ï¼‰ã€‚*

### 3.2 ç»„ä»¶åŒ–é‡æ„ç­–ç•¥
æˆ‘ä»¬æ²¡æœ‰ç®€å•åœ°å¤åˆ¶ HTMLï¼Œè€Œæ˜¯å°† UI æ‹†åˆ†ä¸ºåŸå­ç»„ä»¶ï¼š
*   **åŸå­ç»„ä»¶**: `TechInput.svelte`, `LogLine.svelte`, `SectionHeader.svelte`ã€‚è¿™äº›ç»„ä»¶åªè´Ÿè´£å±•ç¤ºï¼Œä¸å«ä¸šåŠ¡é€»è¾‘ã€‚
*   **å®¹å™¨ç»„ä»¶**: `TrafficMonitor.svelte`, `SystemLog.svelte`ã€‚è¿™äº›ç»„ä»¶è´Ÿè´£è®¢é˜… Storeï¼Œå¹¶å¤„ç†å¸ƒå±€ã€‚
*   **å¸ƒå±€ç»„ä»¶**: `TopBar.svelte`, `LeftPanel.svelte`, `RightPanel.svelte`ã€‚

### 3.3 TypeScript é¢„å¤„ç† (The Silent Crash)
**ç°è±¡**: åº”ç”¨å¯åŠ¨å**ç™½å±/é€æ˜**ï¼Œæ§åˆ¶å°æ— æŠ¥é”™ã€‚
**åŸå› **: Svelte ç»„ä»¶ä¸­ä½¿ç”¨äº† `<script lang="ts">`ï¼Œä½† Vite çš„ Svelte æ’ä»¶é»˜è®¤æœªå¯ç”¨ TS é¢„å¤„ç†ã€‚
**ä¿®å¤**:
1.  å®‰è£… `svelte-preprocess`ã€‚
2.  åˆ›å»º `svelte.config.js` å¹¶é…ç½® `preprocess: vitePreprocess()`ã€‚
3.  **è‡³å…³é‡è¦**: åœ¨ `vite.config.ts` ä¸­æ˜¾å¼åŠ è½½é…ç½®æ–‡ä»¶ï¼š
    ```typescript
    plugins: [svelte({ configFile: './svelte.config.js' })]
    ```

-----

## 4. æ•°æ®æ¡¥æ¢ (The Bridge) ä¸çŠ¶æ€ç®¡ç†

è¿™æ˜¯æ¶æ„ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼š**UI å±‚ç»ä¸ç›´æ¥ç¢° WebSocket æˆ– Tauri API**ï¼Œä¸€åˆ‡é€šè¿‡ `bridge.ts`ã€‚

### 4.1 Bridge æ¨¡å—èŒè´£
`Source/Svelte/lib/bridge.ts` æ‰¿æ‹…äº†ä»¥ä¸‹èŒè´£ï¼š
1.  **WebSocket ç®¡ç†**: è´Ÿè´£è¿æ¥ã€æ–­çº¿é‡è¿ã€å¿ƒè·³ã€‚
2.  **æ•°æ®æ¸…æ´—**: åç«¯å‘æ¥çš„åŸå§‹ JSON åœ¨è¿™é‡Œè¢«è½¬æ¢ä¸º UI å‹å¥½çš„æ ¼å¼ã€‚
3.  **ID ç”Ÿæˆ**: **(å…³é”®)** ä¸ºæ¯ä¸€æ¡æ—¥å¿—ç”Ÿæˆå‰ç«¯å”¯ä¸€çš„ ID (`Date.now() + counter`)ï¼Œä¾› Svelte åˆ—è¡¨æ¸²æŸ“ä½¿ç”¨ã€‚
4.  **OSC å‚æ•°è§£æ**: ç”±äºåç«¯æš‚æœªå¤„ç†å‚æ•°ç±»å‹ï¼Œå‰ç«¯å®ç°äº† `parseOSCArguments`ï¼Œå°†å­—ç¬¦ä¸² `"1, 2.5, true"` æ™ºèƒ½è§£æä¸ºå¯¹åº”çš„ JS ç±»å‹ã€‚

### 4.2 Svelte Store è®¾è®¡
æˆ‘ä»¬åœ¨ `stores.ts` ä¸­ä½¿ç”¨äº† `writable` å’Œ `derived`ã€‚
*   **æ—¥å¿—å­˜å‚¨**: `oscSentLogs`, `oscRecvLogs`, `systemLogs`ã€‚
*   **æœç´¢è¿‡æ»¤**: ä½¿ç”¨ `derived` store å®ç°äº†é›¶æˆæœ¬çš„å®æ—¶æœç´¢è¿‡æ»¤ï¼š
    ```typescript
    export const filteredLogs = derived([rawLogs, searchTerm], ([$raw, $term]) => {
        return $raw.filter(log => log.path.includes($term));
    });
    ```

### 4.3 è®¾ç½®æ¨¡æ€æ¡†çš„æœ€ä½³å®è·µ
åœ¨ `SettingsModal.svelte` ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†åŒå‘ç»‘å®šå¯¼è‡´çš„**æ€§èƒ½é—®é¢˜å’Œé€»è¾‘æ··ä¹±**ã€‚
**è§£å†³æ–¹æ¡ˆ**: é‡‡ç”¨ **"Copy-on-Write"** æ¨¡å¼ã€‚
1.  **æ‰“å¼€æ—¶**: å°† Store ä¸­çš„é…ç½®å¤åˆ¶åˆ°ç»„ä»¶å†…çš„æœ¬åœ°å˜é‡ (`localConfig`)ã€‚
2.  **ç¼–è¾‘æ—¶**: `input` ç»‘å®šçš„æ˜¯ `localConfig`ï¼Œæ­¤æ—¶ Store ä¸å˜ï¼ŒUI å“åº”æå¿«ã€‚
3.  **ä¿å­˜æ—¶**: ç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œä¸€æ¬¡æ€§å°† `localConfig` å†™å…¥åç«¯å’Œ Storeã€‚

-----

## 5. æ·±å‘è­¦ç¤ºå½• (Troubleshooting Bible)

è¿™æ˜¯æˆ‘ä»¬åœ¨è¿ç§»è¿‡ç¨‹ä¸­èŠ±è´¹æ•°å°æ—¶è°ƒè¯•å‡ºçš„è¡€æ³ªç»éªŒã€‚

### ğŸ’€ å‘ 1: ç•Œé¢å®Œå…¨é€æ˜ (The Transparent Window)
**ç°è±¡**: å¯åŠ¨åçª—å£è½®å»“å­˜åœ¨ï¼Œä½†å†…å®¹å…¨é€æ˜ï¼Œä»¿ä½›åº”ç”¨æ²¡åŠ è½½ã€‚
**æ ¹æº**: **JS è¿è¡Œæ—¶é”™è¯¯å¯¼è‡´ Svelte æŒ‚è½½å¤±è´¥**ã€‚ç”±äº Tauri çª—å£é»˜è®¤è®¾ä¸ºé€æ˜ï¼Œå¦‚æœ UI æ²¡æ¸²æŸ“å‡ºèƒŒæ™¯è‰²ï¼Œå°±æ˜¯é€æ˜çš„ã€‚
**å¸¸è§å‡¶æ‰‹**:
1.  **Tauri API é”™è¯¯**: ä½¿ç”¨äº† V1 çš„ `appWindow`ã€‚
    *   **ä¿®å¤**: å¿…é¡»ä½¿ç”¨ `import { getCurrentWindow } from '@tauri-apps/api/window'`ã€‚
2.  **ESM/CJS æ··ç”¨**: `import OSC from 'osc-js'` åœ¨æŸäº› Vite é…ç½®ä¸‹ä¼šå¯¼è‡´æ¨¡å—è§£æå¤±è´¥ã€‚
3.  **TS é¢„å¤„ç†ç¼ºå¤±**: è§ 3.3 èŠ‚ã€‚

### ğŸ’€ å‘ 2: åˆ—è¡¨æ¸²æŸ“å´©æºƒ (Duplicate Keys Error)
**ç°è±¡**: ç•Œé¢çªç„¶å˜ç™½ï¼Œæ§åˆ¶å°æŠ¥ `Cannot have duplicate keys in a keyed each`.
**åœºæ™¯**: `{#each logs as log (log.id)}`
**æ ¹æº**: å¦‚æœåç«¯æ¨é€äº†ä¸¤æ¡æ•°æ®ï¼Œä¸”å‰ç«¯å¤„ç†é€»è¾‘æœ‰æ¼æ´ï¼Œå¯¼è‡´å®ƒä»¬çš„ `id` éƒ½æ˜¯ `undefined`ï¼ŒSvelte ä¼šç«‹åˆ»å´©æºƒã€‚
**ç»ˆæé˜²å¾¡**:
åœ¨æ¨¡æ¿ä¸­**æ°¸è¿œ**åŠ ä¸€é“å®‰æ£€ï¼š
```svelte
{#each $logs.filter(l => l && l.id != null) as log (log.id)}
  <!-- UI -->
{/each}
```

### ğŸ’€ å‘ 3: å“åº”å¼è¯­æ³•ç‚¸å¼¹
**é”™è¯¯**:
```typescript
<script>
  // é”™è¯¯ï¼šåœ¨é¡¶å±‚ç›´æ¥ä½¿ç”¨ $store
  const bg = $isDarkMode ? 'black' : 'white'; 
</script>
```
è¿™ä¼šå¯¼è‡´ Svelte ç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç åœ¨è¿è¡Œæ—¶æŠ¥é”™ã€‚
**æ­£ç¡®**:
```typescript
<script>
  // æ­£ç¡®ï¼šä½¿ç”¨å“åº”å¼å£°æ˜
  $: bg = $isDarkMode ? 'black' : 'white';
</script>
```

### ğŸ’€ å‘ 4: é…ç½®æ–‡ä»¶æ ¼å¼ (Config Format)
ç”±äºé¡¹ç›®æ˜¯ `"type": "module"`ï¼Œæ‰€æœ‰çš„é…ç½®æ–‡ä»¶ï¼ˆ`tailwind.config.js`, `postcss.config.js`ï¼‰å¦‚æœä½¿ç”¨ `module.exports` è¯­æ³•ï¼Œ**å¿…é¡»**é‡å‘½åä¸º `.cjs` åç¼€ï¼Œå¦åˆ™ Vite æ— æ³•åŠ è½½ï¼Œå¯¼è‡´æ ·å¼ä¸¢å¤±ã€‚

-----

## 6. é…ç½®æŒä¹…åŒ–ä¸è·¨å¹³å°ç­–ç•¥

### 6.1 é…ç½®æ–‡ä»¶è¯»å†™åˆ†ç¦»
ä¸ºäº†é€‚åº” Windows `Program Files` çš„æƒé™é™åˆ¶ï¼š
*   **è¯»å–**: ä¼˜å…ˆè¯» `AppData`ï¼Œå¤±è´¥åˆ™è¯»å®‰è£…ç›®å½•é»˜è®¤é…ç½®ã€‚
*   **å†™å…¥**: **æ°¸è¿œåªå†™** `AppData` ç”¨æˆ·ç›®å½•ã€‚

### 6.2 é»˜è®¤é…ç½®åµŒå…¥
åœ¨ `Source/Tauri/build.rs` ä¸­ç¼–å†™è„šæœ¬ï¼Œç¼–è¯‘æ—¶è‡ªåŠ¨å°† `Resource/config_pure.json` å¤åˆ¶åˆ°æ„å»ºäº§ç‰©ç›®å½•ã€‚ç¡®ä¿ç”¨æˆ·åˆæ¬¡å®‰è£…æ—¶æœ‰é»˜è®¤é…ç½®å¯ç”¨ã€‚

-----

## 7. æ„å»ºã€CI/CD ä¸ç‰ˆæœ¬ç®¡ç†

### 7.1 ä¾èµ–ç‰ˆæœ¬ç­–ç•¥
Tauri v2 ä»å¤„äºå¿«é€Ÿè¿­ä»£ä¸­ï¼ŒNPM åŒ…ç‰ˆæœ¬ææ˜“å†²çªã€‚
*   **ç­–ç•¥**: åœ¨ `package.json` ä¸­å¯¹ Tauri ç›¸å…³åŒ…ä½¿ç”¨å®½æ³›ç‰ˆæœ¬å·ï¼ˆå¦‚ `^2.0.0`ï¼‰ï¼Œå¹¶å®šæœŸæ‰§è¡Œ `npm update`ã€‚
*   **CI ä¿®å¤**: å¦‚æœ CI æŠ¥é”™ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œåˆ é™¤ `package-lock.json` å’Œ `node_modules` é‡æ–°ç”Ÿæˆé€šå¸¸èƒ½è§£å†³é—®é¢˜ã€‚

### 7.2 è‡ªåŠ¨åŒ–è„šæœ¬
*   `Scripts/sync-version.cjs`: è‡ªåŠ¨åŒæ­¥ `package.json` çš„ç‰ˆæœ¬å·åˆ° `Cargo.toml` å’Œ `tauri.conf.json`ã€‚
*   `Scripts/post-build.cjs`: æ„å»ºåè‡ªåŠ¨æ•´ç† `.exe` / `.msi` æ–‡ä»¶åˆ°ç»Ÿä¸€ç›®å½•ã€‚

-----

## 8. æœ€ç»ˆéªŒæ”¶æ¸…å• (Checklist)

åœ¨æäº¤ä»£ç æˆ–å‘å¸ƒæ–°ç‰ˆæœ¬å‰ï¼Œè¯·åŠ¡å¿…æ ¸å¯¹ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] **ä¾èµ–æ£€æŸ¥**: ç¡®è®¤ `package.json` ä¸­æ²¡æœ‰ç‰ˆæœ¬å†²çªï¼Œ`npm install` æ— æŠ¥é”™ã€‚
- [ ] **Vite é…ç½®**: ç¡®è®¤ `vite.config.ts` æ­£ç¡®åŠ è½½äº† Svelte æ’ä»¶å’Œé…ç½®æ–‡ä»¶ã€‚
- [ ] **Tauri API**: å…¨å±€æœç´¢ `appWindow`ï¼Œç¡®ä¿å·²å…¨éƒ¨æ›¿æ¢ä¸º `getCurrentWindow()`ã€‚
- [ ] **æ‹–æ‹½åŒºåŸŸ**: ç¡®è®¤æ ‡é¢˜æ åŒ…å« `data-tauri-drag-region` å±æ€§ã€‚
- [ ] **å”¯ä¸€ Key**: ç¡®è®¤æ‰€æœ‰ `#each` å¾ªç¯éƒ½ä½¿ç”¨äº†å”¯ä¸€çš„ `id`ï¼Œä¸”å·²è¿‡æ»¤ `undefined`ã€‚
- [ ] **å“åº”å¼è¯­æ³•**: æ£€æŸ¥æ‰€æœ‰ `.svelte` æ–‡ä»¶ï¼Œç¡®ä¿æ²¡æœ‰åœ¨ `<script>` é¡¶å±‚é”™è¯¯ä½¿ç”¨ `$`ã€‚
- [ ] **æ•°æ®ç»“æ„**: ç¡®è®¤ `bridge.ts` äº§ç”Ÿçš„ Log å¯¹è±¡ç»“æ„ä¸ `LogLine.svelte` æœŸæœ›çš„ Props ç»“æ„å®Œå…¨ä¸€è‡´ï¼ˆä¸è¦æ»¥ç”¨ `...data` å¹³é“ºï¼‰ã€‚
- [ ] **æ ·å¼æ£€æŸ¥**: ç¡®è®¤ `tailwind.config.cjs` çš„ content è·¯å¾„æ­£ç¡®ï¼Œç•Œé¢æ— é€æ˜ç°è±¡ã€‚

-----

## 9. é™„å½•ï¼šæ ¸å¿ƒé…ç½®æ–‡ä»¶å‚è€ƒ

### vite.config.ts (å…³é”®é…ç½®)
```typescript
import { defineConfig } from "vite";
import { svelte } from "@sveltejs/vite-plugin-svelte";
import path from "path";

export default defineConfig(async () => ({
  // æ˜¾å¼æŒ‡å®š Svelte é…ç½®æ–‡ä»¶ï¼Œé˜²æ­¢é¢„å¤„ç†å¤±æ•ˆ
  plugins: [svelte({ configFile: './svelte.config.js' })],
  resolve: {
    alias: {
      // è·¯å¾„åˆ«åæ˜ å°„
      '$lib': path.resolve(__dirname, 'Source/Svelte/lib'),
    }
  },
  server: {
    port: 1420,
    strictPort: true,
  },
  build: {
    // è¾“å‡ºç›®å½•é…ç½®
    outDir: 'Build',
    emptyOutDir: true,
  }
}));
```

### svelte.config.js
```javascript
import { vitePreprocess } from '@sveltejs/vite-plugin-svelte';

export default {
  // å¯ç”¨ TypeScript æ”¯æŒ
  preprocess: vitePreprocess(),
}
```

---

**ç»“è¯­**:
æ­¤æ¬¡è¿ç§»å°†é¡¹ç›®ä»ä¸€ä¸ªéš¾ä»¥ç»´æŠ¤çš„åŸç”Ÿ JS ç©å…·ï¼Œè½¬å˜ä¸ºä¸€ä¸ªæ‹¥æœ‰ç°ä»£åŒ–æ¶æ„ã€ç±»å‹å®‰å…¨ã€ç»„ä»¶åŒ–å’Œé«˜æ€§èƒ½çš„ä¸“ä¸šæ¡Œé¢åº”ç”¨ã€‚åç»­å¼€å‘è€…è¯·åŠ¡å¿…éµå¾ª**â€œUI ä¸é€»è¾‘åˆ†ç¦»â€**å’Œ**â€œé˜²å¾¡æ€§ç¼–ç¨‹â€**çš„åŸåˆ™è¿›è¡Œç»´æŠ¤ã€‚
